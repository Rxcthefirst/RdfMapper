# ════════════════════════════════════════════════════════════════════════════════
# RDFMap Configuration - Internal Format (Full Inline)
# ════════════════════════════════════════════════════════════════════════════════
#
# This is the original internal format with all mapping details inline.
# Use this when you want everything in one file with full pipeline configuration.
#
# ════════════════════════════════════════════════════════════════════════════════

namespaces:
  xsd: http://www.w3.org/2001/XMLSchema#
  rdfs: http://www.w3.org/2000/01/rdf-schema#
  ex: https://example.com/mortgage#
  owl: http://www.w3.org/2002/07/owl#

defaults:
  base_iri: http://example.org/

sheets:
  - name: loans
    source: ../data/loans_500000.csv
    format: csv

    # Main resource configuration
    row_resource:
      class: ex:MortgageLoan
      iri_template: "{base_iri}mortgage_loan/{LoanID}"

    # Column mappings (data properties)
    columns:
      LoanID:
        as: ex:loanNumber
        datatype: xsd:string
        required: true

      Principal:
        as: ex:principalAmount
        datatype: xsd:integer
        transform: to_integer
        required: true

      InterestRate:
        as: ex:interestRate
        datatype: xsd:decimal
        transform: to_decimal
        required: true

      OriginationDate:
        as: ex:originationDate
        datatype: xsd:date
        transform: to_date
        required: true

      LoanTerm:
        as: ex:loanTerm
        datatype: xsd:integer
        transform: to_integer
        required: true

      Status:
        as: ex:loanStatus
        datatype: xsd:string
        required: true

    # Linked objects (object properties)
    objects:
      borrower:
        predicate: ex:hasBorrower
        class: ex:Borrower
        iri_template: "{base_iri}borrower/{BorrowerID}"
        properties:
          - column: BorrowerName
            as: ex:borrowerName
            datatype: xsd:string
            required: true

      property:
        predicate: ex:collateralProperty
        class: ex:Property
        iri_template: "{base_iri}property/{PropertyID}"
        properties:
          - column: PropertyAddress
            as: ex:propertyAddress
            datatype: xsd:string
            required: true

# Validation configuration
validation:
  shacl:
    enabled: true
    shapes_file: ../shapes/mortgage_shapes.ttl
    inference: none

# Processing options
options:
  on_error: "report"
  skip_empty_values: true
  chunk_size: 1000
  aggregate_duplicates: true
  output_format: ttl

# Ontology imports
imports:
  - ../ontology/mortgage_ontology.ttl

